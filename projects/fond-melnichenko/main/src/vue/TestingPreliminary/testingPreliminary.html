<script type="text/x-template" id="v-test-preliminary-template">
  <div class="test__container">
        <div class="test__body"
            v-if="keyQuestion === counterQuestion"
            v-for="(question, keyQuestion) in testArray">
          <template v-if="!feedbackShow">
            <div class="row mb-30 mb-xs-25" v-if="feedbackType === 'highlight'">
                <div class="col-12">
                    <!--Щётчик вопросов-->
                    <p class="text-m text-gray-light">{{ counterQuestion + 1 + '/' + testArray.length }}</p>
                </div>
            </div>

            <div class="row mb-60 mb-xs-45" v-if="storyMod">
                <div class="col-12 mb-60 mb-xs-45" v-if="testArray.length > 1">
                    <!--Щётчик вопросов-->
                    <p class="text-l text-gray-light">{{ counterQuestion + 1 + '/' + testArray.length }}</p>
                </div>
                <div class="col-lg-12 col-xs-12 mb-xs-25" >
                    <picture class="main-people__charset" >
                        <img class="img_center" :src="question.storyImg" alt="Персонаж"/>
                    </picture>
                </div>
                <div class="col-lg-12 col-xs-12 align-center" v-html="question.storyText">

                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <!--Text вопроса-->
                    <h4 class="mb-10 mb-xs-15">{{ question.text }}</h4>

                    <p class="text-s text-gray-light mb-30 mb-xs-25" v-if="!question.supText">{{question.type === 'checkbox' ? 'Выбери несколько вариантов' : 'Выбери один ответ'}}</p>
                    <p class="text-s text-gray-light mb-30 mb-xs-25" v-else>{{question.supText}}</p>
                </div>
                <div class="col-12">
                    <!--Radio ответы-->
                    <div class="test__answers" v-if="question.type === 'radio'">
                        <div class="radio" v-for="(answer, keyAnswer) in question.answers">
                            <input type="radio"
                                @change="isTarget($event, keyAnswer, question.type)"
                                :checked="answer.selected"
                                :id="'radio'+question.name+''+keyAnswer"
                                :value="keyAnswer"
                                :disabled="disableInput"
                                :name="'radio'+question.name">
                            
                            <label v-if="feedbackType === 'highlight'"  :class="['text-m', {'correct_show' : (answer.selected && answer.correct && isAnswered)}, {'correct_show' : (!answer.selected && answer.correct && isAnswered)}, {'incorrect_sel' : (answer.selected && !answer.correct && isAnswered)}]"
                                :for="'radio'+question.name+''+keyAnswer">{{ answer.text }}</label>      

                        </div>
                    </div>

                    <!--Checkbox ответы-->
                    <div class="test__answers" v-if="question.type === 'checkbox'">
                        <div class="checkbox" v-for="(answer, keyAnswer) in question.answers">
                            <input type="checkbox"
                                @change="isTarget($event, keyAnswer, question.type)"
                                :checked="answer.selected"
                                v-model="answer.selected"
                                :id="'checkbox'+question.name+''+keyAnswer"
                                :value="keyAnswer"
                                :disabled="disableInput"
                                :name="'checkbox'+question.name+''+keyAnswer">
                            <label :class="['text-m', {'correct_sel' : (answer.selected && answer.correct && btnNext)}, {'incorrect_sel' : (answer.selected && !answer.correct && btnNext)}]"
                                :for="'checkbox'+question.name+''+keyAnswer">{{ answer.text }}</label>
                        </div>
                    </div>
                </div>
            </div>
          </template>
          
        <template v-else>
          <slot name="pos" :counter="counterCorrect" v-if="counterCorrect === +passingScore">
                    ПОС
          </slot>
          <slot name="oos" :counter="counterCorrect"  v-else>
              ООС
          </slot>
          <div class="col-12 text-center">
              <button class="btn js-next"><span class="btn__text">Продолжить</span>
              </button>
            </div>
        </template>
        </div>

        
        <div class="test__footer text-center"
             v-if="tempStorage.items.length !== 0">
            <button class="btn btn_border" v-if="btnAccept" @click="acceptAnswer()">
                <span class="btn__text">Принять ответ</span>
            </button>
            <button class="btn btn_border" v-if="btnNext" @click="nextQuestion()">
                <span class="btn__text">{{btnNextText}}</span>
            </button>
        </div>



    </div>
</script>